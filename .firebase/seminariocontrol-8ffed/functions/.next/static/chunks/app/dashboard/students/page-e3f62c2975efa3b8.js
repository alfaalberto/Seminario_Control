(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{829:(e,t,s)=>{Promise.resolve().then(s.bind(s,9100))},1312:(e,t,s)=>{"use strict";s.d(t,{O:()=>d,StudentsProvider:()=>o});var r=s(5155),a=s(2115),n=s(3473);let i=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,a.useState)(()=>{try{let e=localStorage.getItem("students");return e?JSON.parse(e):n.tS}catch(e){return console.error("Failed to parse students from localStorage",e),n.tS}});return(0,a.useEffect)(()=>{try{localStorage.setItem("students",JSON.stringify(s))}catch(e){console.error("Failed to save students to localStorage",e)}},[s]),(0,r.jsx)(i.Provider,{value:{students:s,addStudent:e=>{o(t=>[...t,e])},updateStudent:e=>{o(t=>t.map(t=>t.id===e.id?e:t))},deleteStudent:e=>{o(t=>t.filter(t=>t.id!==e))}},children:t})},d=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useStudents must be used within a StudentsProvider");return e}},2523:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var r=s(5155),a=s(2115),n=s(9434);let i=a.forwardRef((e,t)=>{let{className:s,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},6126:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var r=s(5155);s(2115);var a=s(2085),n=s(9434);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}},7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var r=s(2115);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],l={toasts:[]};function c(e){l=o(l,e),d.forEach(e=>{e(l)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(l);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8030:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,AuthProvider:()=>i});var r=s(5155),a=s(2115);let n=(0,a.createContext)(void 0),i=e=>{let{children:t}=e,[s,i]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{try{let e=localStorage.getItem("authenticatedUser");e&&i(JSON.parse(e))}catch(e){console.error("Failed to parse authenticated user from localStorage",e),localStorage.removeItem("authenticatedUser")}d(!1)},[]);let l=(null==s?void 0:s.role)==="admin";return(0,r.jsx)(n.Provider,{value:{authenticatedUser:s,isAdmin:l,isAuthLoading:o,login:e=>{i(e),localStorage.setItem("authenticatedUser",JSON.stringify(e))},logout:()=>{i(null),localStorage.removeItem("authenticatedUser")}},children:t})},o=()=>{let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8437:(e,t,s)=>{"use strict";s.d(t,{EvaluationsProvider:()=>o,f:()=>d});var r=s(5155),a=s(2115),n=s(3473);let i=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,a.useState)([]);return(0,a.useEffect)(()=>{try{let e=localStorage.getItem("evaluations");e?o(JSON.parse(e)):(o(n.UE),localStorage.setItem("evaluations",JSON.stringify(n.UE)))}catch(e){console.error("Failed to load/parse evaluations from localStorage",e),o(n.UE)}},[]),(0,a.useEffect)(()=>{try{localStorage.setItem("evaluations",JSON.stringify(s))}catch(e){console.error("Failed to save evaluations to localStorage",e)}},[s]),(0,r.jsx)(i.Provider,{value:{evaluations:s,addEvaluation:e=>{o(t=>[...t,e])}},children:t})},d=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useEvaluations must be used within an EvaluationsProvider");return e}},9100:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(5155),a=s(2115),n=s(6695),i=s(5127),o=s(285),d=s(4165),l=s(2523),c=s(5057),u=s(4301),m=s(8763),h=s(7223),f=s(7481),x=s(6126),g=s(8437),v=s(8030),p=s(1312);function S(){let{toast:e}=(0,f.dj)(),{students:t,addStudent:s,updateStudent:S,deleteStudent:j}=(0,p.O)(),{evaluations:E}=(0,g.f)(),{isAdmin:N}=(0,v.A)(),[b,A]=(0,a.useState)(!1),[y,I]=(0,a.useState)(null),[O,T]=(0,a.useState)({id:"",name:"",studentId:""}),C=(0,a.useMemo)(()=>{let e={};for(let s in E.forEach(s=>{let r=t.find(e=>e.name===s.studentName);r&&(e[r.id]||(e[r.id]={totalScore:0,count:0,average:0}),e[r.id].totalScore+=s.overallScore,e[r.id].count++)}),e)e[s].average=e[s].totalScore/e[s].count;return e},[E,t]),w=e=>{I(e),T(e),A(!0)},_=t=>{j(t),e({title:"Estudiante Eliminado",description:"El estudiante ha sido eliminado de la lista."})},P=e=>{let{id:t,value:s}=e.target;T(e=>({...e,[t]:s}))};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Estudiantes"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Administrar y ver la informaci\xf3n de los estudiantes."})]}),N&&(0,r.jsxs)(d.lG,{open:b,onOpenChange:A,children:[(0,r.jsx)(d.zM,{asChild:!0,children:(0,r.jsxs)(o.$,{onClick:()=>{I(null),T({id:"",name:"",studentId:""}),A(!0)},children:[(0,r.jsx)(u.A,{className:"mr-2"}),"Agregar Estudiante"]})}),(0,r.jsxs)(d.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(d.c7,{children:[(0,r.jsx)(d.L3,{children:y?"Editar Estudiante":"Agregar Estudiante"}),(0,r.jsx)(d.rr,{children:y?"Actualiza la informaci\xf3n del estudiante.":"Completa los detalles para agregar un nuevo estudiante."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(c.J,{htmlFor:"name",className:"text-right",children:"Nombre"}),(0,r.jsx)(l.p,{id:"name",value:O.name,onChange:P,className:"col-span-3",placeholder:"Ej: Ana Garc\xeda"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(c.J,{htmlFor:"studentId",className:"text-right",children:"ID de Estudiante"}),(0,r.jsx)(l.p,{id:"studentId",value:O.studentId,onChange:P,className:"col-span-3",placeholder:"Ej: A01234567"})]})]}),(0,r.jsx)(d.Es,{children:(0,r.jsx)(o.$,{type:"submit",onClick:()=>{if(!O.name||!O.studentId)return void e({variant:"destructive",title:"Campos Requeridos",description:"Por favor, completa todos los campos."});y?(S({...O,id:y.id}),e({title:"Estudiante Actualizado",description:"La informaci\xf3n del estudiante ha sido actualizada.",className:"bg-accent text-accent-foreground"})):(s({...O,id:Date.now().toString()}),e({title:"Estudiante Agregado",description:"El nuevo estudiante ha sido agregado a la lista.",className:"bg-accent text-accent-foreground"})),A(!1)},children:"Guardar Cambios"})})]})]})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Lista de Estudiantes"}),(0,r.jsx)(n.BT,{children:"Una lista de todos los estudiantes en el programa."})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)(i.XI,{children:[(0,r.jsx)(i.A0,{children:(0,r.jsxs)(i.Hj,{children:[(0,r.jsx)(i.nd,{children:"Nombre"}),(0,r.jsx)(i.nd,{children:"ID de Estudiante"}),(0,r.jsx)(i.nd,{children:"Promedio General"}),N&&(0,r.jsx)(i.nd,{className:"text-right",children:"Acciones"})]})}),(0,r.jsx)(i.BF,{children:t.map(e=>{let t=C[e.id],s=t?t.average.toFixed(2):"N/A";return(0,r.jsxs)(i.Hj,{children:[(0,r.jsx)(i.nA,{className:"font-medium",children:e.name}),(0,r.jsx)(i.nA,{children:e.studentId}),(0,r.jsx)(i.nA,{children:"N/A"!==s?(0,r.jsx)(x.E,{variant:"secondary",children:s}):(0,r.jsx)("span",{className:"text-muted-foreground",children:"N/A"})}),N&&(0,r.jsxs)(i.nA,{className:"text-right space-x-2",children:[(0,r.jsxs)(o.$,{variant:"ghost",size:"icon",onClick:()=>w(e),children:[(0,r.jsx)(m.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Editar"})]}),(0,r.jsxs)(o.$,{variant:"ghost",size:"icon",onClick:()=>_(e.id),children:[(0,r.jsx)(h.A,{className:"h-4 w-4 text-destructive"}),(0,r.jsx)("span",{className:"sr-only",children:"Eliminar"})]})]})]},e.id)})})]})})]})]})}function j(){return(0,r.jsx)(S,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[769,443,129,553,677,441,684,358],()=>t(829)),_N_E=e.O()}]);