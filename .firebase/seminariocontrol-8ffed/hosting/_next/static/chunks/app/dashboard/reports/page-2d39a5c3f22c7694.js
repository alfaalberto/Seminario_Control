(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[589],{2346:(e,r,a)=>{"use strict";a.d(r,{w:()=>o});var s=a(5155),t=a(2115),l=a(7489),n=a(9434);let o=t.forwardRef((e,r)=>{let{className:a,orientation:t="horizontal",decorative:o=!0,...i}=e;return(0,s.jsx)(l.b,{ref:r,decorative:o,orientation:t,className:(0,n.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",a),...i})});o.displayName=l.b.displayName},2383:()=>{},2725:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>b});var s=a(5155),t=a(2115),l=a(6695),n=a(5127),o=a(8437),i=a(6126),d=a(3473),c=a(4165),m=a(5057),u=a(7655),x=a(9434);let h=t.forwardRef((e,r)=>{let{className:a,children:t,...l}=e;return(0,s.jsxs)(u.bL,{ref:r,className:(0,x.cn)("relative overflow-hidden",a),...l,children:[(0,s.jsx)(u.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,s.jsx)(p,{}),(0,s.jsx)(u.OK,{})]})});h.displayName=u.bL.displayName;let p=t.forwardRef((e,r)=>{let{className:a,orientation:t="vertical",...l}=e;return(0,s.jsx)(u.VM,{ref:r,orientation:t,className:(0,x.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...l,children:(0,s.jsx)(u.lr,{className:"relative flex-1 rounded-full bg-border"})})});p.displayName=u.VM.displayName;var f=a(2346),v=a(285),j=a(3925),N=a(1540);function b(){let{evaluations:e}=(0,o.f)(),[r,a]=(0,t.useState)(!1),[u,x]=(0,t.useState)(null),p=e=>e>=9?"default":e>=7?"secondary":"destructive",b=e=>{x(e),a(!0)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Reportes de Evaluaci\xf3n"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Ver y analizar registros de evaluaciones pasadas."})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(l.ZB,{className:"text-2xl font-bold",children:"Todas las Evaluaciones"}),(0,s.jsx)(l.BT,{children:"Un historial completo de todas las evaluaciones registradas en el seminario. Haz clic en una fila para ver los detalles."})]}),(0,s.jsx)(v.$,{onClick:()=>{if(!e||0===e.length)return void alert("No hay evaluaciones para exportar.");let r=new Set;for(let e in d.AQ)d.AQ[e].forEach(e=>{r.add(e.name)});let a=Array.from(r).sort(),s=["ID Evaluaci\xf3n","Nombre Estudiante","Semestre","Fecha","Evaluador","Calificaci\xf3n Final",...a,"Comentarios Profesor","Comentarios IA"],t=e.map(e=>{let r=[e.id,e.studentName,e.semester,e.date,e.evaluator,e.overallScore];return a.forEach(a=>{r.push(e.scores[a]||0)}),r.push(e.professorPrompt),r.push(e.aiComments),r}),l=j.Wp.aoa_to_sheet([s,...t]),n=j.Wp.book_new();j.Wp.book_append_sheet(n,l,"Evaluaciones");let o=new Blob([j.M9(n,{bookType:"xlsx",type:"array"})],{type:"application/octet-stream"});(0,N.saveAs)(o,"reporte_evaluaciones.xlsx")},children:"Exportar a Excel"})," "]}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)(n.XI,{children:[(0,s.jsx)(n.A0,{children:(0,s.jsxs)(n.Hj,{children:[(0,s.jsx)(n.nd,{children:"Estudiante"}),(0,s.jsx)(n.nd,{children:"Semestre"}),(0,s.jsx)(n.nd,{children:"Fecha"}),(0,s.jsx)(n.nd,{children:"Evaluador"}),(0,s.jsx)(n.nd,{className:"text-right",children:"Calificaci\xf3n Final"})]})}),(0,s.jsx)(n.BF,{children:e.length>0?e.map(e=>(0,s.jsxs)(n.Hj,{onClick:()=>b(e),className:"cursor-pointer",children:[(0,s.jsx)(n.nA,{className:"font-medium",children:e.studentName}),(0,s.jsx)(n.nA,{children:e.semester}),(0,s.jsx)(n.nA,{children:e.date}),(0,s.jsx)(n.nA,{children:e.evaluator}),(0,s.jsx)(n.nA,{className:"text-right",children:(0,s.jsx)(i.E,{variant:p(e.overallScore),className:e.overallScore>=9?"bg-accent text-accent-foreground":"",children:e.overallScore.toFixed(2)})})]},e.id)):(0,s.jsx)(n.Hj,{children:(0,s.jsx)(n.nA,{colSpan:5,className:"text-center text-muted-foreground",children:"No hay evaluaciones para mostrar."})})})]})})]})]}),(0,s.jsx)(c.lG,{open:r,onOpenChange:a,children:(0,s.jsxs)(c.Cf,{className:"sm:max-w-2xl",children:[(0,s.jsxs)(c.c7,{children:[(0,s.jsx)(c.L3,{children:"Detalles de la Evaluaci\xf3n"}),(0,s.jsx)(c.rr,{children:"Evaluaci\xf3n de ".concat(null==u?void 0:u.studentName," para el ").concat(null==u?void 0:u.semester," semestre, realizada el ").concat(null==u?void 0:u.date,".")})]}),u&&(0,s.jsx)(h,{className:"max-h-[70vh] pr-6",children:(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold mb-2",children:"Calificaciones por Criterio"}),(0,s.jsxs)("div",{className:"space-y-2 rounded-md border p-4",children:[Object.entries(u.scores).map(e=>{let[r,a]=e;return(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,s.jsx)("span",{children:r}),(0,s.jsx)("span",{className:"font-mono font-semibold text-primary",children:a.toFixed(1)})]},r)}),"\\",(0,s.jsx)(f.w,{className:"my-2"}),(0,s.jsxs)("div",{className:"flex justify-between items-center font-bold",children:[(0,s.jsx)("span",{children:"Calificaci\xf3n Final Ponderada"}),(0,s.jsx)("span",{className:"font-mono text-primary",children:u.overallScore.toFixed(2)})]})]})]}),u.professorPrompt&&(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"prof-prompt-detail",className:"font-semibold",children:"Indicaci\xf3n del Profesor"}),(0,s.jsx)("p",{id:"prof-prompt-detail",className:"mt-1 text-sm text-muted-foreground p-3 bg-muted rounded-md",children:u.professorPrompt})]}),u.aiComments&&(0,s.jsxs)("div",{children:[(0,s.jsx)(m.J,{htmlFor:"ai-comments-detail",className:"font-semibold",children:"Comentarios de la IA"}),(0,s.jsx)("p",{id:"ai-comments-detail",className:"mt-1 text-sm text-muted-foreground p-3 bg-muted rounded-md whitespace-pre-wrap",children:u.aiComments})]})]})})]})})]})}},3686:()=>{},6126:(e,r,a)=>{"use strict";a.d(r,{E:()=>o});var s=a(5155);a(2115);var t=a(2085),l=a(9434);let n=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:r,variant:a,...t}=e;return(0,s.jsx)("div",{className:(0,l.cn)(n({variant:a}),r),...t})}},7366:(e,r,a)=>{Promise.resolve().then(a.bind(a,2725))},8437:(e,r,a)=>{"use strict";a.d(r,{EvaluationsProvider:()=>o,f:()=>i});var s=a(5155),t=a(2115),l=a(3473);let n=(0,t.createContext)(void 0),o=e=>{let{children:r}=e,[a,o]=(0,t.useState)([]);return(0,t.useEffect)(()=>{try{let e=localStorage.getItem("evaluations");e?o(JSON.parse(e)):(o(l.UE),localStorage.setItem("evaluations",JSON.stringify(l.UE)))}catch(e){console.error("Failed to load/parse evaluations from localStorage",e),o(l.UE)}},[]),(0,t.useEffect)(()=>{try{localStorage.setItem("evaluations",JSON.stringify(a))}catch(e){console.error("Failed to save evaluations to localStorage",e)}},[a]),(0,s.jsx)(n.Provider,{value:{evaluations:a,addEvaluation:e=>{o(r=>[...r,e])}},children:r})},i=()=>{let e=(0,t.useContext)(n);if(void 0===e)throw Error("useEvaluations must be used within an EvaluationsProvider");return e}}},e=>{var r=r=>e(e.s=r);e.O(0,[524,769,443,129,872,677,441,684,358],()=>r(7366)),_N_E=e.O()}]);