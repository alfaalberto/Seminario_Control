(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[136],{2523:(e,s,r)=>{"use strict";r.d(s,{p:()=>o});var t=r(5155),a=r(2115),i=r(9434);let o=a.forwardRef((e,s)=>{let{className:r,type:a,...o}=e;return(0,t.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...o})});o.displayName="Input"},3461:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>j});var t=r(5155),a=r(2115),i=r(6695),o=r(5127),l=r(285),n=r(4165),d=r(2523),c=r(5057),u=r(4301),m=r(8763),p=r(7223),h=r(7481),f=r(4942),x=r(8030);function g(){let{toast:e}=(0,h.dj)(),{professors:s,adminUser:r,addProfessor:g,updateProfessor:j,deleteProfessor:v}=(0,f.U)(),{isAdmin:S}=(0,x.A)(),[N,A]=(0,a.useState)(!1),[b,E]=(0,a.useState)(null),[y,w]=(0,a.useState)({id:"",name:"",department:"",email:"",password:""}),C=[r,...s],T=e=>{E(e),w({...e,password:""}),A(!0)},O=s=>{if(s===r.id)return void e({variant:"destructive",title:"Error",description:"No se puede eliminar al administrador."});v(s),e({title:"Profesor Eliminado",description:"El profesor ha sido eliminado de la lista."})},I=e=>{let{id:s,value:r}=e.target;w(e=>({...e,[s]:r}))};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Usuarios"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Administrar y ver la informaci\xf3n de profesores y administradores."})]}),S&&(0,t.jsxs)(n.lG,{open:N,onOpenChange:A,children:[(0,t.jsx)(n.zM,{asChild:!0,children:(0,t.jsxs)(l.$,{onClick:()=>{E(null),w({id:"",name:"",department:"",email:"",password:""}),A(!0)},children:[(0,t.jsx)(u.A,{className:"mr-2"}),"Agregar Profesor"]})}),(0,t.jsxs)(n.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(n.c7,{children:[(0,t.jsx)(n.L3,{children:b?"Editar Usuario":"Agregar Profesor"}),(0,t.jsx)(n.rr,{children:b?"Actualiza la informaci\xf3n del usuario.":"Completa los detalles para agregar un nuevo profesor."})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c.J,{htmlFor:"name",className:"text-right",children:"Nombre"}),(0,t.jsx)(d.p,{id:"name",value:y.name,onChange:I,className:"col-span-3",placeholder:"Ej: Dr. Alan Smith",disabled:(null==b?void 0:b.id)==="admin"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c.J,{htmlFor:"email",className:"text-right",children:"Email"}),(0,t.jsx)(d.p,{id:"email",type:"email",value:y.email,onChange:I,className:"col-span-3",placeholder:"Ej: alan.smith@universidad.edu"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c.J,{htmlFor:"department",className:"text-right",children:"Departamento"}),(0,t.jsx)(d.p,{id:"department",value:y.department,onChange:I,className:"col-span-3",placeholder:"Ej: Ciencias de la Computaci\xf3n"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c.J,{htmlFor:"password",className:"text-right",children:"Contrase\xf1a"}),(0,t.jsx)(d.p,{id:"password",type:"password",value:y.password,onChange:I,className:"col-span-3",placeholder:b?"Dejar en blanco para no cambiar":"Contrase\xf1a segura"})]})]}),(0,t.jsx)(n.Es,{children:(0,t.jsx)(l.$,{type:"submit",onClick:()=>{if(!y.name||!y.department||!y.email)return void e({variant:"destructive",title:"Campos Requeridos",description:"Por favor, completa los campos de nombre, departamento y email."});if(b)j({...y,id:b.id,password:y.password||b.password}),e({title:"Usuario Actualizado",description:"La informaci\xf3n del usuario ha sido actualizada.",className:"bg-accent text-accent-foreground"});else{if(!y.password)return void e({variant:"destructive",title:"Campos Requeridos",description:"La contrase\xf1a es requerida para nuevos profesores."});g({...y,id:Date.now().toString()}),e({title:"Profesor Agregado",description:"El nuevo profesor ha sido agregado a la lista.",className:"bg-accent text-accent-foreground"})}A(!1)},children:"Guardar Cambios"})})]})]})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Lista de Usuarios"}),(0,t.jsx)(i.BT,{children:"Una lista de todos los usuarios del sistema."})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)(o.XI,{children:[(0,t.jsx)(o.A0,{children:(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nd,{children:"Nombre"}),(0,t.jsx)(o.nd,{children:"Email"}),(0,t.jsx)(o.nd,{children:"Departamento"}),S&&(0,t.jsx)(o.nd,{className:"text-right",children:"Acciones"})]})}),(0,t.jsx)(o.BF,{children:C.map(e=>(0,t.jsxs)(o.Hj,{children:[(0,t.jsx)(o.nA,{className:"font-medium",children:e.name}),(0,t.jsx)(o.nA,{children:e.email}),(0,t.jsx)(o.nA,{children:e.department}),S&&(0,t.jsxs)(o.nA,{className:"text-right space-x-2",children:[(0,t.jsxs)(l.$,{variant:"ghost",size:"icon",onClick:()=>T(e),children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Editar"})]}),"admin"!==e.id&&(0,t.jsxs)(l.$,{variant:"ghost",size:"icon",onClick:()=>O(e.id),children:[(0,t.jsx)(p.A,{className:"h-4 w-4 text-destructive"}),(0,t.jsx)("span",{className:"sr-only",children:"Eliminar"})]})]})]},e.id))})]})})]})]})}function j(){return(0,t.jsx)(g,{})}},4463:(e,s,r)=>{Promise.resolve().then(r.bind(r,3461))},4942:(e,s,r)=>{"use strict";r.d(s,{ProfessorsProvider:()=>l,U:()=>n});var t=r(5155),a=r(2115),i=r(3473);let o=(0,a.createContext)(void 0),l=e=>{let{children:s}=e,[r,l]=(0,a.useState)(()=>{try{let e=localStorage.getItem("professors");return e?JSON.parse(e):i.zm}catch(e){return console.error("Failed to parse professors from localStorage",e),i.zm}}),[n,d]=(0,a.useState)(()=>{try{let e=localStorage.getItem("adminUser");return e?JSON.parse(e):i.BF}catch(e){return console.error("Failed to parse admin user from localStorage",e),i.BF}});return(0,a.useEffect)(()=>{try{localStorage.setItem("professors",JSON.stringify(r)),localStorage.setItem("adminUser",JSON.stringify(n))}catch(e){console.error("Failed to save user data to localStorage",e)}},[r,n]),(0,t.jsx)(o.Provider,{value:{professors:r,adminUser:n,addProfessor:e=>{l(s=>[...s,e])},updateProfessor:e=>{e.id===n.id?d(e):l(s=>s.map(s=>s.id===e.id?e:s))},deleteProfessor:e=>{l(s=>s.filter(s=>s.id!==e))}},children:s})},n=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("useProfessors must be used within a ProfessorsProvider");return e}},7481:(e,s,r)=>{"use strict";r.d(s,{dj:()=>m});var t=r(2115);let a=0,i=new Map,o=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=s;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},n=[],d={toasts:[]};function c(e){d=l(d,e),n.forEach(e=>{e(d)})}function u(e){let{...s}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...s,id:r,open:!0,onOpenChange:e=>{e||t()}}}),{id:r,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,s]=t.useState(d);return t.useEffect(()=>(n.push(s),()=>{let e=n.indexOf(s);e>-1&&n.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8030:(e,s,r)=>{"use strict";r.d(s,{A:()=>l,AuthProvider:()=>o});var t=r(5155),a=r(2115);let i=(0,a.createContext)(void 0),o=e=>{let{children:s}=e,[r,o]=(0,a.useState)(null),[l,n]=(0,a.useState)(!0);(0,a.useEffect)(()=>{try{let e=localStorage.getItem("authenticatedUser");e&&o(JSON.parse(e))}catch(e){console.error("Failed to parse authenticated user from localStorage",e),localStorage.removeItem("authenticatedUser")}n(!1)},[]);let d=(null==r?void 0:r.role)==="admin";return(0,t.jsx)(i.Provider,{value:{authenticatedUser:r,isAdmin:d,isAuthLoading:l,login:e=>{o(e),localStorage.setItem("authenticatedUser",JSON.stringify(e))},logout:()=>{o(null),localStorage.removeItem("authenticatedUser")}},children:s})},l=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var s=s=>e(e.s=s);e.O(0,[769,443,129,553,677,441,684,358],()=>s(4463)),_N_E=e.O()}]);